import React, { useEffect, useMemo, useState } from "react";

/* ---------- utils ---------- */
function useWindowWidth() {
  const [w, setW] = useState(() => window.innerWidth);
  useEffect(() => {
    const on = () => setW(window.innerWidth);
    window.addEventListener("resize", on);
    return () => window.removeEventListener("resize", on);
  }, []);
  return w;
}

function tryClickByText(texts = []) {
  const els = Array.from(document.querySelectorAll("button, a"));
  for (const t of texts) {
    const hit = els.find((el) => (el.innerText || "").trim().toLowerCase().includes(t.toLowerCase()));
    if (hit) {
      hit.click();
      return true;
    }
  }
  return false;
}

function openHubLogin() {
  const ok = tryClickByText(["Acessar o painel", "Escolher m√≥dulo", "Entrar no sistema"]);
  if (!ok) window.location.href = "/app?mod=poprua";
}

function goContato() {
  const el = document.getElementById("contato");
  if (el) {
    el.scrollIntoView({ behavior: "smooth", block: "start" });
    return;
  }
  window.location.href =
    "mailto:?subject=Solicitar%20demonstra%C3%A7%C3%A3o%20IDEAL&body=Ol%C3%A1%2C%20quero%20agendar%20uma%20demonstra%C3%A7%C3%A3o%20da%20IDEAL.%0A%0A%C3%81rea%20de%20interesse%3A%20(SUAS%2FSa%C3%BAde%2FEduca%C3%A7%C3%A3o%2FPesquisas)%0AMunic%C3%ADpio%2FUF%3A%0ANome%20e%20cargo%3A%0AWhatsApp%3A%0A";
}

/* ---------- UI ---------- */
function Surface({ children, onClick, style = {} }) {
  return (
    <div
      onClick={onClick}
      style={{
        borderRadius: 5,
        padding: 3,
        background: "rgba(255,255,255,0.70)",
        border: "1px solid rgba(0,0,0,0.06)",
        boxShadow: "0 18px 60px rgba(0,0,0,0.12)",
        backdropFilter: "blur(10px)",
        WebkitBackdropFilter: "blur(10px)",
        ...style,
        cursor: onClick ? "pointer" : "default",
      }}
    >
      {children}
    </div>
  );
}

function Btn({ primary, children, onClick }) {
  return (
    <button
      onClick={onClick}
      type="button"
      style={{
        padding: "12px 16px",
        borderRadius: 250,
        border: primary ? "1px solid rgba(122,92,255,0.25)" : "1px solid rgba(0,0,0,0.10)",
        background: primary ? "rgba(122,92,255,0.95)" : "rgba(255,255,255,0.85)",
        color: primary ? "white" : "rgba(20,20,30,0.9)",
        fontWeight: 950,
        cursor: "pointer",
        whiteSpace: "nowrap",
        boxShadow: primary ? "0 18px 50px rgba(122,92,255,0.28)" : "0 10px 30px rgba(0,0,0,0.08)",
      }}
    >
      {children}
    </button>
  );
}

function Pill({ text }) {
  return (
    <span
      style={{
        display: "inline-flex",
        padding: "6px 10px",
        borderRadius: 250,
        border: "1px solid rgba(122, 92, 255, 0.25)",
        background: "rgba(122, 92, 255, 0.10)",
        fontSize: 6,
        fontWeight: 900,
        letterSpacing: 1.2,
        textTransform: "uppercase",
        color: "rgba(92, 74, 220, 1)",
        whiteSpace: "nowrap",
      }}
    >
      {text}
    </span>
  );
}

function MiniCards({ items }) {
  return (
    <div style={{ display: "grid", gridTemplateColumns: "1fr 1fr", gap: 2 }}>
      {items.map((it, i) => (
        <div
          key={i}
          style={{
            borderRadius: 5,
            padding: 3,
            border: "1px solid rgba(0,0,0,0.06)",
            background: "rgba(255,255,255,0.55)",
          }}
        >
          <div style={{ fontWeight: 950, marginBottom: 3 }}>{it.title}</div>
          <div style={{ opacity: 0.82, fontSize: 6 }}>{it.desc}</div>
        </div>
      ))}
    </div>
  );
}

function List({ title, items, icon }) {
  return (
    <div
      style={{
        border: "1px solid rgba(0,0,0,0.06)",
        background: "rgba(255,255,255,0.55)",
        borderRadius: 5,
        padding: 3,
      }}
    >
      <div style={{ fontWeight: 980, marginBottom: 3 }}>{title}</div>
      <div style={{ display: "grid", gap: 2 }}>
        {items.map((x, i) => (
          <div key={i} style={{ display: "flex", gap: 2 }}>
            <span aria-hidden="true">{icon}</span>
            <div style={{ opacity: 0.92 }}>{x}</div>
          </div>
        ))}
      </div>
    </div>
  );
}

function Chips({ title, items }) {
  return (
    <div>
      <div style={{ fontWeight: 980, marginBottom: 3 }}>{title}</div>
      <div style={{ display: "flex", flexWrap: "wrap", gap: 2 }}>
        {items.map((t) => (
          <span
            key={t}
            style={{
              padding: "8px 12px",
              borderRadius: 250,
              border: "1px solid rgba(0,0,0,0.08)",
              background: "rgba(255,255,255,0.75)",
              fontWeight: 900,
              opacity: 0.9,
            }}
          >
            {t}
          </span>
        ))}
      </div>
    </div>
  );
}

function Audience({ items }) {
  return (
    <div
      style={{
        border: "1px solid rgba(0,0,0,0.06)",
        background: "rgba(255,255,255,0.55)",
        borderRadius: 5,
        padding: 3,
      }}
    >
      <div style={{ fontWeight: 980, marginBottom: 3 }}>Para quem √©</div>
      <div style={{ display: "flex", flexWrap: "wrap", gap: 2 }}>
        {items.map((t) => (
          <span
            key={t}
            style={{
              padding: "8px 12px",
              borderRadius: 250,
              border: "1px solid rgba(0,0,0,0.08)",
              background: "rgba(255,255,255,0.75)",
              fontWeight: 900,
              opacity: 0.92,
            }}
          >
            {t}
          </span>
        ))}
      </div>
    </div>
  );
}

/* ---------- dashboard preview ---------- */
function KPI({ label, value }) {
  return (
    <div
      style={{
        borderRadius: 5,
        padding: 3,
        border: "1px solid rgba(0,0,0,0.06)",
        background: "rgba(255,255,255,0.60)",
      }}
    >
      <div style={{ fontSize: 6, opacity: 0.75, fontWeight: 900 }}>{label}</div>
      <div style={{ fontSize: 6, fontWeight: 980, marginTop: 3 }}>{value}</div>
    </div>
  );
}

function Bars({ values = [] }) {
  const max = Math.max(1, ...values);
  return (
    <div
      style={{
        borderRadius: 5,
        padding: 3,
        border: "1px solid rgba(0,0,0,0.06)",
        background: "rgba(255,255,255,0.60)",
      }}
    >
      <div style={{ fontSize: 6, opacity: 0.75, fontWeight: 900, marginBottom: 3 }}>Evolu√ß√£o (exemplo)</div>
      <div style={{ display: "flex", gap: 2, alignItems: "flex-end", height: 14 }}>
        {values.map((v, i) => (
          <div
            key={i}
            style={{
              width: 3,
              height: Math.round((v / max) * 54),
              borderRadius: 5,
              border: "1px solid rgba(122,92,255,0.18)",
              background: "rgba(122,92,255,0.22)",
            }}
          />
        ))}
      </div>
    </div>
  );
}

function DashboardPreview({ d }) {
  const presets = {
    suas: {
      title: "Indicadores (exemplo) (SUAS)",
      kpis: [
        ["Casos ativos", "128"],
        ["Pend√™ncias (SLA)", "19"],
        ["Sem movimento", "7"],
        ["Retorno da rede", "12"],
      ],
      bars: [3, 4, 5, 4, 6, 7, 5, 8, 6, 7, 9, 8],
    },
    saude: {
      title: "Indicadores (exemplo) (Sa√∫de)",
      kpis: [
        ["Fila (aberta)", "342"],
        ["Tempo m√©dio", "21d"],
        ["Produ√ß√£o m√™s", "1.284"],
        ["Gargalos", "3"],
      ],
      bars: [5, 6, 7, 6, 8, 9, 10, 9, 11, 12, 13, 12],
    },
    educacao: {
      title: "Indicadores (exemplo) (Educa√ß√£o)",
      kpis: [
        ["Frequ√™ncia", "92%"],
        ["Evas√£o", "3,1%"],
        ["A√ß√µes ativas", "46"],
        ["Prazos hoje", "8"],
      ],
      bars: [8, 7, 7, 8, 9, 9, 10, 9, 11, 11, 12, 12],
    },
    pesquisas: {
      title: "Indicadores (exemplo) (Pesquisas)",
      kpis: [
        ["√çndice geral", "62"],
        ["Tracking", "+4"],
        ["Segmentos", "8"],
        ["Alertas", "2"],
      ],
      bars: [50, 52, 54, 55, 56, 58, 60, 62, 61, 63, 64, 66],
    },
  };

  const p = presets[d.key] || presets.suas;

  return (
    <div
      style={{
        borderRadius: 5,
        padding: 3,
        border: "1px solid rgba(0,0,0,0.06)",
        background:
          "linear-gradient(135deg, rgba(122,92,255,0.10), rgba(255,255,255,0.55))",
        boxShadow: "0 18px 50px rgba(0,0,0,0.10)",
      }}
    >
      <div style={{ fontWeight: 980, marginBottom: 3 }}>{p.title}</div>
      <div style={{ display: "grid", gridTemplateColumns: "1fr 1fr", gap: 2 }}>
        {p.kpis.map(([label, value]) => (
          <KPI key={label} label={label} value={value} />
        ))}
      </div>
      <div style={{ marginTop: 3 }}>
        <Bars values={p.bars} />
      </div>
      <div style={{ marginTop: 3, fontSize: 6, opacity: 0.65 }}>
        * Ilustra√ß√£o (placeholder). O painel real √© configurado com seus indicadores.
      </div>
    </div>
  );
}

/* ---------- routing param ---------- */
function useAreaParam() {
  const [area, setArea] = useState(() => new URL(window.location.href).searchParams.get("area") || "");
  useEffect(() => {
    const onPop = () => setArea(new URL(window.location.href).searchParams.get("area") || "");
    window.addEventListener("popstate", onPop);
    return () => window.removeEventListener("popstate", onPop);
  }, []);
  const go = (next) => {
    const u = new URL(window.location.href);
    if (next) u.searchParams.set("area", next);
    else u.searchParams.delete("area");
    window.history.pushState({}, "", u.toString());
    setArea(next || "");
    window.scrollTo({ top: 0, behavior: "smooth" });
  };
  return { area, go };
}

export default function IdealAreas() {
  const { area, go } = useAreaParam();
  const w = useWindowWidth();
  const mobile = w < 980;

  const defs = useMemo(
    () => ({
      suas: {
        key: "suas",
        icon: "ü§ù",
        pill: "SUAS",
        menuTitle: "SUAS",
        menuDesc: "Fluxo, SLA, evid√™ncias e rede (CRAS/CREAS/PopRua).",
        title: "Assist√™ncia Social (SUAS)",
        tagline: "Do atendimento ao relat√≥rio: padroniza a rotina, cria continuidade e d√° visibilidade de prazos, etapas e resultados.",
        audience: ["Secret√°rio(a)", "Coordena√ß√£o CRAS/CREAS", "T√©cnicos", "Gest√£o", "Controle social (CMAS)"],
        mini: [
          { title: "Anti-caso parado", desc: "Pend√™ncias e pr√≥ximo passo obrigat√≥rio com prazo." },
          { title: "Auditoria e evid√™ncias", desc: "Linha do tempo + anexos + trilha do que foi feito." },
          { title: "Rede com retorno", desc: "Encaminha + cria prazo + cobra devolutiva." },
          { title: "Gest√£o e controle social", desc: "Relat√≥rios e indicadores por territ√≥rio/unidade." },
        ],
        why: [
          "Padroniza√ß√£o por fluxo (etapas e devolutivas) com SLA por respons√°vel.",
          "Rastreabilidade por pessoa/fam√≠lia/caso com LGPD por perfil.",
          "Rede organizada: encaminhamento com prazo e retorno (sem perder evid√™ncia).",
        ],
        delivers: [
          "Prontu√°rio simples + linha do tempo",
          "Pend√™ncias/SLA + justificativa de estagna√ß√£o",
          "Encaminhamentos com retorno e alertas",
          "Relat√≥rios (produ√ß√£o, gargalos, rede, demanda)",
        ],
        indicators: [
          "SLA cumprido vs vencido por etapa",
          "Casos ativos/novos/encerrados por per√≠odo",
          "Tempo m√©dio por etapa e por t√©cnico",
          "Demandas por tema/detalhe e territ√≥rio",
        ],
        useCases: [
          "PopRua: atendimento e acompanhamento",
          "CRAS: triagem, PAIF/SCFV, Cad√önico e agenda",
          "CREAS (PAEFI): viola√ß√µes, plano do caso, rede e prazos",
        ],
        scope: ["Pop Rua", "CRAS", "CREAS (PAEFI)", "Equipamentos", "Terceiro Setor", "Gest√£o regional"],
      },

      saude: {
        key: "saude",
        icon: "ü©∫",
        pill: "SA√öDE",
        menuTitle: "Sa√∫de",
        menuDesc: "Processos por etapa, evid√™ncias e indicadores para reduzir fila e gargalos.",
        title: "Sa√∫de (gest√£o e execu√ß√£o)",
        tagline: "Transforma rotina em processo: prazos, respons√°veis, evid√™ncias e dashboards ‚Äî sem planilha.",
        audience: ["Secret√°rio(a)", "Dire√ß√£o de unidade", "Regula√ß√£o", "Gest√£o", "Controle interno"],
        mini: [
          { title: "Fila sob controle", desc: "Tempo por etapa/servi√ßo com gargalos vis√≠veis." },
          { title: "Processo audit√°vel", desc: "Registro padronizado + evid√™ncias anexadas." },
          { title: "SLA e pend√™ncias", desc: "Atraso vira alerta + justificativa + pr√≥xima a√ß√£o." },
          { title: "Gest√£o por indicadores", desc: "Produ√ß√£o, tempo, capacidade e conformidade." },
        ],
        why: [
          "Trilhas por processo (SLA) com respons√°veis e prazos vis√≠veis.",
          "Dashboards acion√°veis (fila, produ√ß√£o, tempo, gargalos) para decis√£o r√°pida.",
          "Registro padronizado + evid√™ncias anexadas (auditoria e presta√ß√£o de contas).",
        ],
        delivers: [
          "Fluxos por servi√ßo com SLA e respons√°vel",
          "Pend√™ncias autom√°ticas e justificativa de estagna√ß√£o",
          "Dashboards e relat√≥rios (fila/produ√ß√£o/tempo)",
          "Auditoria e evid√™ncias anexadas",
        ],
        indicators: [
          "Tempo de espera por etapa/servi√ßo",
          "Produ√ß√£o por unidade/equipe",
          "Gargalos por etapa e motivo",
          "Pend√™ncias por prazo e conformidade",
        ],
        useCases: [
          "Gest√£o de fila e tempo de espera por servi√ßo",
          "Processos com evid√™ncia (auditoria)",
          "Relat√≥rios por unidade/equipe (produ√ß√£o e gargalos)",
        ],
        scope: ["Processos", "Registros", "Indicadores", "Auditoria", "Rede (intersetorial)"],
      },

      educacao: {
        key: "educacao",
        icon: "üéì",
        pill: "EDUCA√á√ÉO",
        menuTitle: "Educa√ß√£o",
        menuDesc: "Fluxos, registros e indicadores para presen√ßa, evas√£o e execu√ß√£o com evid√™ncias.",
        title: "Educa√ß√£o (gest√£o e resultados)",
        tagline: "Rotina simples na escola + governan√ßa e indicadores para gest√£o (frequ√™ncia, evas√£o, cobertura e execu√ß√£o).",
        audience: ["Secret√°rio(a)", "Diretores", "Coordena√ß√£o pedag√≥gica", "Supervis√£o", "Conselho"],
        mini: [
          { title: "Evas√£o e presen√ßa", desc: "Indicadores por territ√≥rio e escola." },
          { title: "A√ß√£o com devolutiva", desc: "Fluxo por etapa com respons√°vel e prazo." },
          { title: "Registro com evid√™ncia", desc: "Hist√≥rico por aluno/turma com anexos." },
          { title: "Relat√≥rios para conselho", desc: "Presta√ß√£o de contas e trilha audit√°vel." },
        ],
        why: [
          "Rotinas padronizadas e audit√°veis (fim do 'cada escola faz de um jeito').",
          "Indicadores claros para decis√£o (frequ√™ncia/evas√£o/cobertura).",
          "Acompanhamento por etapa + prazos e pend√™ncias (execu√ß√£o de verdade).",
        ],
        delivers: [
          "Registro por aluno/turma com hist√≥rico",
          "Fluxo por etapas (a√ß√£o ‚Üí devolutiva ‚Üí reavalia√ß√£o)",
          "Pend√™ncias e prazos (prioriza√ß√£o)",
          "Relat√≥rios e indicadores para gest√£o e conselho",
        ],
        indicators: [
          "Frequ√™ncia e evas√£o por territ√≥rio",
          "Cobertura por programa/a√ß√£o",
          "Tempo de resolu√ß√£o por etapa",
          "Produ√ß√£o por unidade/equipe",
        ],
        useCases: [
          "Busca ativa e acompanhamento de frequ√™ncia",
          "Programas e projetos com cobertura e resultados",
          "Encaminhamentos e devolutivas com rastreabilidade",
        ],
        scope: ["Fluxos", "Registros", "Indicadores", "Auditoria", "Campanhas e comunica√ß√£o"],
      },

      pesquisas: {
        key: "pesquisas",
        icon: "üìä",
        pill: "PESQUISAS",
        menuTitle: "Pesquisas",
        menuDesc: "Eleitoral, mercado e qualidade do servi√ßo p√∫blico ‚Äî m√©todo + execu√ß√£o + recomenda√ß√£o.",
        title: "Pesquisas e Intelig√™ncia",
        tagline: "Menos achismo, mais decis√£o: instrumento, amostra, coleta, an√°lise e recomenda√ß√µes acion√°veis ‚Äî com leitura territorial.",
        audience: ["Prefeito/Gabinete", "Secretarias", "Comunica√ß√£o", "Planejamento", "Empresas/marketing"],
        mini: [
          { title: "Eleitoral (tracking)", desc: "Evolu√ß√£o no tempo e alertas de mudan√ßa." },
          { title: "Mercado", desc: "Segmenta√ß√£o, drivers e oportunidades." },
          { title: "Servi√ßo p√∫blico", desc: "Jornada do usu√°rio e qualidade por servi√ßo." },
          { title: "Diagn√≥stico territorial", desc: "Leitura por regi√£o e prioriza√ß√£o de a√ß√£o." },
        ],
        why: [
          "Pesquisa ponta a ponta (m√©todo ‚Üí coleta ‚Üí an√°lise ‚Üí recomenda√ß√£o).",
          "Dashboards com recortes e evolu√ß√£o no tempo.",
          "Leitura territorial (segmenta√ß√£o por regi√£o e perfil).",
        ],
        delivers: [
          "Tracking eleitoral e alertas",
          "Pesquisa de mercado e segmenta√ß√£o",
          "Avalia√ß√£o de qualidade do servi√ßo p√∫blico",
          "Diagn√≥stico territorial e plano de a√ß√£o",
        ],
        indicators: [
          "√çndices por √°rea/servi√ßo e evolu√ß√£o",
          "Clusters/segmentos por perfil",
          "S√©ries temporais (tracking)",
          "Prioriza√ß√£o impacto x viabilidade",
        ],
        useCases: [
          "Tracking de governo e inten√ß√£o de voto",
          "Pesquisa de satisfa√ß√£o por servi√ßo",
          "Pesquisa de mercado e posicionamento",
        ],
        scope: ["Eleitoral (tracking)", "Mercado", "Qualidade do servi√ßo", "Diagn√≥stico territorial"],
      },
    }),
    []
  );

  const keys = ["suas", "saude", "educacao", "pesquisas"];
  const [selected, setSelected] = useState("suas");

  // P√°gina completa (detalhe)
  if (area) {
    const d = defs[area];
    if (!d) return null;

    return (
      <div style={{ display: "grid", gap: 5 }} data-ideal-areas="1">
        <div style={{ display: "flex", justifyContent: "space-between", gap: 2, alignItems: "center" }}>
          <Btn onClick={() => go("")}>‚Üê Voltar para √°reas</Btn>
          <div style={{ display: "flex", gap: 2, flexWrap: "wrap" }}>
            <Btn primary onClick={openHubLogin}>Escolher m√≥dulo (login)</Btn>
            <Btn onClick={goContato}>Agendar demonstra√ß√£o</Btn>
          </div>
        </div>

        <Surface>
          <div style={{ display: "grid", gridTemplateColumns: mobile ? "1fr" : "1.25fr 0.75fr", gap: 2, alignItems: "start" }}>
            <div>
              <div style={{ display: "flex", alignItems: "center", gap: 2, marginBottom: 3 }}>
                <div style={{
                  width: 11, height: 14, borderRadius: 250,
                  display: "flex", alignItems: "center", justifyContent: "center",
                  border: "1px solid rgba(122,92,255,0.20)", background: "rgba(122,92,255,0.10)", fontSize: 6
                }}>{d.icon}</div>
                <div>
                  <Pill text={d.pill} />
                  <div style={{ fontSize: 9, fontWeight: 980, marginTop: 3, lineHeight: 1.05 }}>{d.title}</div>
                  <div style={{ opacity: 0.78, marginTop: 3 }}>{d.tagline}</div>
                </div>
              </div>

              <MiniCards items={d.mini} />

              <div style={{ marginTop: 3, display: "grid", gridTemplateColumns: mobile ? "1fr" : "1fr 1fr 1fr", gap: 2 }}>
                <List title="Por que √© ideal" items={d.why} icon="‚úÖ" />
                <List title="O que entregamos" items={d.delivers} icon="üì¶" />
                <List title="Indicadores" items={d.indicators} icon="üìä" />
              </div>

              <div style={{ marginTop: 3, display: "grid", gridTemplateColumns: mobile ? "1fr" : "1fr 1fr", gap: 2 }}>
                <List title="Casos de uso" items={d.useCases} icon="‚úÖ" />
                <div style={{ border: "1px solid rgba(0,0,0,0.06)", background: "rgba(255,255,255,0.55)", borderRadius: 5, padding: 3 }}>
                  <Chips title="Escopo / m√≥dulos" items={d.scope} />
                  <div style={{ marginTop: 3 }}>
                    <Audience items={d.audience} />
                  </div>
                </div>
              </div>
            </div>

            <div>
              <DashboardPreview d={d} />
            </div>
          </div>
        </Surface>
      </div>
    );
  }

  const d = defs[selected];

  return (
    <Surface>
      {/* Cabe√ßalho do seletor */}
      <div style={{ display: "flex", justifyContent: "space-between", gap: 2, alignItems: "center" }}>
        <div>
          <Pill text="IDEAL ¬∑ √ÅREAS" />
          <div style={{ fontSize: 10, fontWeight: 980, marginTop: 3, lineHeight: 1.05 }}>
            √Åreas separadas e bem explicadas
          </div>
          <div style={{ opacity: 0.78, marginTop: 3 }}>
            SUAS, Sa√∫de, Educa√ß√£o e Pesquisas ‚Äî cada uma com proposta, entregas, indicadores, p√∫blico e exemplos.
          </div>
        </div>

        <div style={{ display: "flex", gap: 2, flexWrap: "wrap" }}>
          <Btn primary onClick={() => go(selected)}>Abrir p√°gina completa</Btn>
          <Btn onClick={openHubLogin}>Escolher m√≥dulo (login)</Btn>
          <Btn onClick={goContato}>Agendar demonstra√ß√£o</Btn>
        </div>
      </div>

      {/* Layout: menu + painel */}
      <div style={{ marginTop: 5, display: "grid", gridTemplateColumns: mobile ? "1fr" : "360px 1fr", gap: 5 }}>
        {/* MENU */}
        <div style={{ display: "grid", gap: 2 }}>
          {keys.map((k) => {
            const a = defs[k];
            const is = k === selected;
            return (
              <div
                key={k}
                onClick={() => setSelected(k)}
                style={{
                  borderRadius: 5,
                  padding: 3,
                  border: is ? "1px solid rgba(122,92,255,0.30)" : "1px solid rgba(0,0,0,0.06)",
                  background: is ? "rgba(122,92,255,0.08)" : "rgba(255,255,255,0.55)",
                  cursor: "pointer",
                  display: "grid",
                  gridTemplateColumns: "44px 1fr",
                  gap: 2,
                  alignItems: "center",
                }}
              >
                <div
                  style={{
                    width: 11,
                    height: 14,
                    borderRadius: 250,
                    display: "flex",
                    alignItems: "center",
                    justifyContent: "center",
                    border: "1px solid rgba(122,92,255,0.20)",
                    background: "rgba(122,92,255,0.10)",
                    fontSize: 6,
                  }}
                >
                  {a.icon}
                </div>

                <div>
                  <div style={{ fontWeight: 980, display: "flex", alignItems: "center", gap: 2 }}>
                    <span>{a.menuTitle}</span>
                    <span style={{ opacity: 0.6, fontWeight: 900, fontSize: 6 }}>{a.pill}</span>
                  </div>
                  <div style={{ opacity: 0.78, marginTop: 3, fontSize: 6 }}>{a.menuDesc}</div>
                </div>
              </div>
            );
          })}
        </div>

        {/* PAINEL */}
        <div style={{ display: "grid", gap: 2 }}>
          <div style={{ display: "grid", gridTemplateColumns: mobile ? "1fr" : "1.15fr 0.85fr", gap: 2 }}>
            <div>
              <div>
                <Pill text={d.pill} />{" "}
                <span style={{ fontSize: 7, fontWeight: 980, marginLeft: 10 }}>{d.title}</span>
                <div style={{ opacity: 0.78, marginTop: 3 }}>{d.tagline}</div>
              </div>

              <div style={{ marginTop: 3 }}>
                <MiniCards items={d.mini} />
              </div>
            </div>

            <div>
              <DashboardPreview d={d} />
            </div>
          </div>

          <div style={{ display: "grid", gridTemplateColumns: mobile ? "1fr" : "1fr 1fr 1fr", gap: 2 }}>
            <List title="Por que √© ideal" items={d.why} icon="‚úÖ" />
            <List title="O que entregamos" items={d.delivers} icon="üì¶" />
            <List title="Indicadores" items={d.indicators} icon="üìä" />
          </div>

          <div style={{ display: "grid", gridTemplateColumns: mobile ? "1fr" : "1fr 1fr", gap: 2 }}>
            <List title="Casos de uso" items={d.useCases} icon="‚úÖ" />
            <div style={{ border: "1px solid rgba(0,0,0,0.06)", background: "rgba(255,255,255,0.55)", borderRadius: 5, padding: 3 }}>
              <Chips title="Escopo / m√≥dulos" items={d.scope} />
              <div style={{ marginTop: 3 }}>
                <Audience items={d.audience} />
              </div>
              <div style={{ marginTop: 3, display: "flex", gap: 2, flexWrap: "wrap" }}>
                <Btn primary onClick={() => go(selected)}>Abrir p√°gina completa</Btn>
                <Btn onClick={openHubLogin}>Escolher m√≥dulo (login)</Btn>
                <Btn onClick={goContato}>Agendar demonstra√ß√£o</Btn>
              </div>
            </div>
          </div>
        </div>
      </div>
    </Surface>
  );
}
